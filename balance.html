<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Portefeuille</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #f4f6f7;
            --text-color: #2c3e50;
        }

        * {
            margin: 0;
            padding: ;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--background-color), #e0e6e9);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 600px;
            width: 95%;
            margin: 10 auto;
            padding: 1px;
        }

        .balance-card {
            background: linear-gradient(145deg, var(--primary-color), #2980b9);
            color: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .balance-amount {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 15px 0;
        }

        .user-info {
            background-color: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 10px;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 59px;
        }

        .action-btn {
            background-color: white;
            border: none;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .action-btn:hover {
            transform: scale(1.05);
        }

        .action-btn i {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 95%;
            background-color: white;
            display: flex;
            justify-content: space-around;
            padding: 5px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
        }

        .bottom-nav a {
            color: var(--text-color);
            text-decoration: none;
            text-align: center;
        }

        .bottom-nav i {
            display: block;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .center-action {
            background-color: var(--secondary-color);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        /* Style pour la popup */
.popup-overlay {
    display: none;
    position: fixed;
    bottom: 0; /* Placer la popup au bas de l'écran */
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    max-width: 400px; /* Corrigé de 40pppx à 100px */
    background-color: white;
    border-radius: 15px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    padding: 10px;
    z-index: 3000;
    animation: slideUp 0.3s ease-out;
}

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translate(-50%, 100%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        .popup-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .popup-btn {
            background-color: var(--background-color);
            border: none;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            transition: transform 0.3s;
        }

        .popup-btn:hover {
            transform: scale(1.05);
            background-color: var(--primary-color);
            color: white;
        }

        .popup-btn i {
            display: block;
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .popup-btn:hover i {
            color: white;
        }
              
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4; /* Fond de page léger */
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh; /* Centrer verticalement */
        margin: 0;
    }
    .section-style {
        background-color: #ffffff; /* Fond blanc pour la section */
        border: 2px solid #ccc; /* Bordure gris */
        border-radius: 30px; /* Coins arrondis */
        padding: 20px; /* Espace intérieur */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* Ombre légère */
        width: 310px; /* Largeur fixe */
        text-align: center; /* Centrer le texte */
    }
    .section-style p {
        color: red; /* Couleur du texte */
        font-size: 22px; /* Taille du texte */
    }
</style>
       
    </style>
</head>
<body>
    <div class="container">
        <div class="balance-card">
            <div class="user-info">
                <span id="userEmail">user@example.com</span>
            </div>
            <div class="balance-amount" id="balanceDisplay">0 FCFA</div>
            <small>Solde actuel</small>
        </div>

        <div class="quick-actions">
            <button class="action-btn" onclick="location.href='https://chat.whatsapp.com/J3DcFOdCUa7BPmjJpYhSGP'">
                <i class="fas fa-plus-circle"></i>
                Groupe 
            </button>
            <button class="action-btn" onclick="location.href='carte.html'">
                <i class="fas fa-arrow-down"></i>
                Carte 
            </button>
            <button class="action-btn" onclick="location.href='historique_retrait.html'">
                <i class="fas fa-history"></i>
                Historique
            </button>
        </div>
    </div>

    <div class="popup-overlay" id="popupMenu">
        <div class="popup-grid">
            <button class="popup-btn" onclick="location.href='recharge.html'">
                <i class="fas fa-plus-circle"></i>
                Recharge
            </button>
            <button class="popup-btn" onclick="location.href='retrait.html'">
                <i class="fas fa-arrow-down"></i>
                Retrait
            </button>
            <button class="popup-btn" onclick="location.href='lier_portefeuille.html'">
                <i class="fas fa-wallet"></i>
                Compte
            </button>
            <button class="popup-btn" onclick="location.href='historique.html'">
                <i class="fas fa-history"></i>
                Historique
            </button>
            <button class="popup-btn" onclick="location.href='star.html'">
                <i class="fas fa-star"></i>
                Stats
            </button>
        </div>
    </div>
  <h2>INFORMATIONS</h6> 
  
  <div class="section-style">
    <p>Cher utilisateur de la plateforme ECOFINANCE vous pouvez mise avec les bonus de 200 FCFA pour gagner 10 FCFA pas jour, vous pouvez recharger n'importe quel montant avec ECOFINANCE et gagner 5 % sur votre mise </p>
</div>
  
 
  
    <nav class="bottom-nav">
        <a href="balance.html"><i class="fas fa-home"></i>Accueil</a>
        <a href="#"><i class="fas fa-credit-card"></i>Menu</a>
        <a href="equipe.html"><i class="fas fa-users"></i>Équipe</a>
    </nav>

    <div class="center-action" id="centerAction">
        <i class="fas fa-ellipsis-h"></i>
    </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCPQvlxIjvJPkMZQ4qElkHla_xQ5QiZfFs",
        authDomain: "paris-3df9f.firebaseapp.com",
        databaseURL: "https://paris-3df9f-default-rtdb.firebaseio.com",
        projectId: "paris-3df9f",
        storageBucket: "paris-3df9f.appspot.com",
        messagingSenderId: "365107415196",
        appId: "1:365107415196:web:4c0021baec5a51a0f50559"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const database = getDatabase(app);

    // Fonction pour initialiser un nouveau compte utilisateur avec 200F
    async function initializeUserAccount(user) {
        const userRef = ref(database, 'users/' + user.uid);
        
       // Vérifier si l'utilisateur existe déjà
        const snapshot = await get(userRef);
        if (!snapshot.exists()) {
            // Si l'utilisateur n'existe pas, initialiser le solde à 200 FCFA
            await set(userRef, {
                email: user.email,
                balance: 200 // Solde initial
            });
        }
    }

    // Vérifier l'état de l'authentification
    onAuthStateChanged(auth, (user) => {
        if (user) {
            // Si l'utilisateur est connecté, initialiser son compte
            initializeUserAccount(user).then(() => {
                // Récupérer le solde et l'afficher
                const userRef = ref(database, 'users/' + user.uid);
                onValue(userRef, (snapshot) => {
                    if (snapshot.exists()) {
                        const data = snapshot.val();
                        document.getElementById('userEmail').textContent = data.email;
                        document.getElementById('balanceDisplay').textContent = data.balance + ' FCFA';
                    }
                });
            });
        } else {
            // Rediriger vers la page de connexion si l'utilisateur n'est pas connecté
            window.location.href = "login.html";
        }
    });

    // Gestion du clic sur le bouton central
    document.getElementById('centerAction').addEventListener('click', () => {
        const popup = document.getElementById('popupMenu');
        if (popup.style.display === 'none' || popup.style.display === '') {
            popup.style.display = 'block';
        } else {
            popup.style.display = 'none';
        }
    });

    // Fermer la popup en cliquant à l'extérieur
    window.addEventListener('click', (event) => {
        const popup = document.getElementById('popupMenu');
        if (!popup.contains(event.target) && event.target !== document.getElementById('centerAction')) {
            popup.style.display = 'none';
        }
    });
</script>
</body>
</html>
